From f4daf6e7b4613fa33195d292015f24173349549b Mon Sep 17 00:00:00 2001
From: Dominggoes Isakh <drjisakh@gmail.com>
Date: Fri, 12 May 2023 23:01:39 +0200
Subject: [PATCH 10/39] Revert "Fix an issue that the
 syncTimestampToDisplayLocked incorrect"

This reverts commit 1c0042b52fcaf018b9b5988c01c69009be0baf82.
---
 services/camera/libcameraservice/device3/Camera3OutputStream.cpp | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/services/camera/libcameraservice/device3/Camera3OutputStream.cpp b/services/camera/libcameraservice/device3/Camera3OutputStream.cpp
index 9dc9552..50314cc 100644
--- a/services/camera/libcameraservice/device3/Camera3OutputStream.cpp
+++ b/services/camera/libcameraservice/device3/Camera3OutputStream.cpp
@@ -1501,8 +1501,7 @@ nsecs_t Camera3OutputStream::syncTimestampToDisplayLocked(nsecs_t t) {
                 vsyncTime.deadlineTimestamp >= currentTime &&
                 ((!cameraDisplayInSync && vsyncTime.expectedPresentationTime > minPresentT) ||
                  (cameraDisplayInSync && vsyncTime.expectedPresentationTime >
-                mLastPresentTime + minInterval +
-                    static_cast<nsecs_t>(biasForShortDelay * kTimelineThresholdNs)))) {
+                mLastPresentTime + minInterval + biasForShortDelay * kTimelineThresholdNs))) {
             expectedPresentT = vsyncTime.expectedPresentationTime;
             minDiff = std::abs(vsyncTime.expectedPresentationTime - idealPresentT);
         }
-- 
2.7.4

